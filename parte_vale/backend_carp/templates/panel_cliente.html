{% load static %}

<div style="color:white; padding:10px;">

    <h3 style="color:#d4af37; font-size:20px; display:flex; align-items:center; gap:6px;">
        üë§ Mi cuenta
    </h3>

    <p><strong style="color:#d4af37;">Usuario:</strong> {{ usuario.nom_usr }}</p>
    <p><strong style="color:#d4af37;">Correo:</strong> {{ usuario.ema_usr }}</p>
    <p><strong style="color:#d4af37;">Tel√©fono:</strong> {{ usuario.tel_usr }}</p>

    <hr style="border-color:#333; margin:18px 0;">


    <!-- ========================================================= -->
    <!-- üî• SECCI√ìN DE REPORTES ENVIADOS POR EL CLIENTE -->
    <!-- ========================================================= -->

    <h3 style="color:#d4af37; margin-top:25px;">üßæ Mis reportes enviados</h3>

    {% if reportes %}
        {% for r in reportes %}
            <div style="
                background:#1b1b1b;
                border-left:4px solid #d4af37;
                padding:12px 15px;
                margin-top:12px;
                border-radius:10px;
            ">
                <p><strong style="color:#d4af37;">Tipo:</strong> {{ r.tp_spt }}</p>
                <p><strong style="color:#d4af37;">Fecha:</strong> {{ r.fch_spt }}</p>

                <p>
                    <strong style="color:#d4af37;">Estado:</strong>
                    {% if r.est_spt == "Respondido" %}
                        <span style="color:#00ff99;">Respondido ‚úî</span>
                    {% else %}
                        <span style="color:#ff5050;">Pendiente ‚è≥</span>
                    {% endif %}
                </p>

                <!-- üî• ESTA ES LA PARTE QUE NO TEN√çAS (Muestra respuesta del admin) -->
                {% if r.respuesta_admin %}
                    <p style="margin-top:10px;">
                        <strong style="color:#d4af37;">Respuesta del administrador:</strong><br>
                        <span style="color:#ccc;">{{ r.respuesta_admin }}</span>
                    </p>
                {% endif %}

            </div>
        {% endfor %}
    {% else %}
        <p style="color:#ccc; margin-top:12px;">No has enviado ning√∫n reporte.</p>
    {% endif %}

</div>


<script>
document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("btn-ver-reservas");

    if (btn) {
        btn.addEventListener("click", () => {
            fetch("/cliente/reservas/")
                .then(res => res.text())
                .then(html => {
                    document.getElementById("popup-content").innerHTML = html;
                });
        });
    }
});
</script>
