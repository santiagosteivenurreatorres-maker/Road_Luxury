{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehículos - Panel Admin</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Poppins', sans-serif; margin:0; background:white; }
        .container { display:flex; height:100vh; }

        .sidebar {
            width:260px; background:black; color:white;
            padding:20px; display:flex; flex-direction:column; align-items:center;
        }

        .sidebar img { width:90px; margin-bottom:10px; }
        .sidebar h2 { color:#d4af37; margin-bottom:20px; }

        .sidebar a {
            color:white; text-decoration:none; padding:10px 20px;
            margin:10px 0; display:block; border-radius:5px;
        }
        .sidebar a:hover { background:#d4af37; color:black; }

        .logout { margin-top:auto; background:#d4af37; color:black; padding:10px 20px; border-radius:6px; }

        .main { flex-grow:1; padding:30px; overflow-y:auto; }

        h1 { border-left:5px solid #d4af37; padding-left:12px; }

        table { width:100%; border-collapse:collapse; margin-top:20px; }
        th { background:#d4af37; color:black; padding:10px; }
        td { padding:10px; border-bottom:1px solid #ccc; text-align:center; }

        .btn { padding:7px 14px; border-radius:6px; text-decoration:none; }
        .editar { background:#3498db; color:white; }
        .eliminar { background:#e74c3c; color:white; }
        .estado { background:#f1c40f; color:black; }
        .agregar { background:#2ecc71; color:white; padding:10px 20px; display:inline-block; margin-bottom:15px; }
    </style>
</head>

<body>
<div class="container">

    <!-- Sidebar -->
    <aside class="sidebar">
        <img src="{% static 'img/img/logo_rl.png' %}" />
        <h2>Administrador</h2>

        <a href="{% url 'admin_panel' %}">Dashboard</a>
        <a href="{% url 'admin_usuarios' %}">Usuarios</a>
        <a href="{% url 'admin_reservas' %}">Reservas</a>
        <a href="{% url 'admin_pagos' %}">Pagos</a>
        <a href="{% url 'vehiculos_admin' %}" style="background:#d4af37; color:black;">Vehículos</a>

        <a href="{% url 'logout' %}" class="logout">Cerrar Sesión</a>
    </aside>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="main">
        <h1>Lista de Vehículos</h1>

        <a href="{% url 'agregar_vehiculo' %}" class="agregar">+ Agregar Vehículo</a>

        <table>
            <tr>
                <th>ID</th>
                <th>Imagen</th>
                <th>Nombre</th>
                <th>Categoría</th>
                <th>Año</th>
                <th>Precio/Día</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>

            {% for v in vehiculos %}
            <tr>
                <td>{{ v.id }}</td>
                <td>
                    {% if v.image %}
                        <img src="{{ v.image.url }}" width="80">
                    {% else %}
                        Sin imagen
                    {% endif %}
                </td>
                <td>{{ v.name }}</td>
                <td>{{ v.category }}</td>
                <td>{{ v.year }}</td>
                <td>${{ v.price }}</td>

                <td>
                    {% if v.availability == "available" %}
                        Disponible
                    {% else %}
                        No disponible
                    {% endif %}
                </td>

                <td>
                    <a href="{% url 'editar_vehiculo' v.id %}" class="btn editar">Editar</a>
                    <a href="{% url 'eliminar_vehiculo' v.id %}" class="btn eliminar">Eliminar</a>
                    <a href="{% url 'toggle_estado_vehiculo' v.id %}" class="btn estado">

                        {% if v.availability == "available" %}Desactivar{% else %}Activar{% endif %}
                    </a>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="8">No hay vehículos registrados.</td></tr>
            {% endfor %}
        </table>

    </main>
</div>
</body>
</html>
